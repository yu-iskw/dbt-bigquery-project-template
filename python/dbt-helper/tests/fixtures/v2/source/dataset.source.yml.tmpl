{#
    It is a template for a BigQuery dataset.
    SEE: https://docs.getdbt.com/reference/source-properties/
#}
{%- import "macros.jinja" as macros -%}

{%- set source_name = '{}__{}__{}'.format(macros.normalize_project_id(project_alias), dataset, table) -%}
---
# It was generated by dbt-helper=={{ dbt_helper_version }}.
version: 2

sources:
  - name: {{ dataset }}
    database: "{{ macros.to_raw_expression( macros.get_var_project(project_alias) ) }}"
    {% if dataset_description is not none and dataset_description | length > 0 -%}
    description: |
      {{ dataset_description }}
    {% else -%}
    description: |
      ## Overview
      ...
    {%- endif %}
    # meta will be written into BigQuery labels by dbt-helper.
    {% if dataset_labels | length > 0 -%}
    meta:
      {%- for k, v in dataset_labels.items() %}
      {{ k }}: "{{ v }}"
      {%- endfor %}
    {%- else -%}
    meta:
      modeled: dbt
      owner: "TODO fill in"
    {%- endif %}
